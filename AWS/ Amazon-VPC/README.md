[Doc1](https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/what-is-amazon-vpc.html)
[Doc2](https://aws.amazon.com/ko/vpc/pricing/)

# Amazon VPC
- VPC (Virtual Private Cloud)는 클라우드 환경을 퍼블릭, 프라이빗의 논리적으로 독립된 네트워크 영역으로 분리하게 해줌.
- 논리적으로 분리된 영역에 격리할 수 있으며, 사용자가 네트워크 환경 설정에 대한 통제권을 가실 수 있음.
- 사용자가 Amazon VPC를 통해 만든 네트워크에서 자체 IP 주소, 퍼블릭, 프라이빗 서브넷, 라우트 테이블, 네트워크 게이트웨이 등 모든 기능을 활용할 수 있음.

### 활용 예시
- 애플리케이션 중 일부는 VPC 내 클라우드에서 실행, 일부는 온프레미스에서 실행.
- VPC 내에서 인터넷의 접근을 허용하는 퍼블릭 서브넷, 한정된 접근을 허용하는 프라이빗 서브넷 생성 가능.
- Direct Connect를 이용해 기업 데이터 센터와 VPN을 전용 회선으로 연결 할 수 있음.
- 하나 이상의 VPC가 필요하다면 다수의 VPC를 생성한 후 VPC 피어링을 통해 서로 연결 가능.

### Amazon VPC 구성요소 - 서브넷
- 서브네트워크(subnetwork)의 줄임말로 IP 네트워크의 논리적인 영역을 부분적으로 나눈 하위 망을 말함.
- 서브넷을 통해 네트워크 분리 가능.

VPC(10.0.0.0/16) 내에 퍼블릭 서브넷, 프라이빗 서브넷
- VPC애에 서브넷을 통해 네트워크망을 분리
- VPC의 IP 대역인 10.0.0.0/16, 퍼블릭 서브넷, 프라이빗 서브넷의 IP 대역 10.0.0.0/24, 10.0.1.0/24

- VPC의 IP 대역을 10.0.0.0/16의 설정은 prefix가 /16이므로 앞의 10.0이 네트워크 주소를의미, 나머지 16bit로 호스트 주소를 정할 수 있다는 의미
  - 10.0.0.0 ~ 10.0.255.255 IP 범위가 같은 네트워크에 속한다는 의미
- 퍼블릭 서브넷의 IP 대역을 10.0.0.0/24로 설정시 24bit(10.0.0.)를 네트워크 주소로 사용하겠다는 의미, 나머지 8bit를 사용해서 호수트 주소를 정할 수 있다는 의미.
  - 10.0.0.0 ~ 10.0.0.255 IP 범위가 같은 퍼블릭 서브넷에 속한다는 의미
- 프라이빗 서브넷의 IP 대역을 10.0.1.0/24로 설정시 24bit(10.0.1.)를 네트워크 주소로 사용하겠다는 의미, 나머지 8bit를 사용해서 호수트 주소를 정할 수 있다는 의미.
  - 10.0.1.0 ~ 10.0.1.255 IP 범위가 같은 프라이 서브넷에 속한다는 의미

- 서브넷 IP 대역은 VPC의 IP 대역에 속해 있어야 하고, 서브넷은 1개의 가용 영역(AZ)에 종속되어야 함.
- AWS에서는 서브넷에 할당할 수 있는 IP 대역에서 미리 예약되어 있는 IP주소가 있는데 이런 예약된 IP 주소들은 AWS자원에 할당할 수 없음.

### AWS에서 서브넷 IP 대역마다 예약된 IP 주소
- 서브넷 IP 대역에서 1 ~ 4번째, 마지막 IP 주소는 예약이 되어 있음.
- ex) VPC의 IP 대역이 10.0.0.0/16, 해당 VPC에 존재하는 서브넷에 할당된 IP 대역이 10.0.0.0/24면 서브넷의 IP 대역은 10.0.0.0 ~ 10.0.0.255.
- 1번째 주소 : 10.0.0.0 -> 네트워크 주소
- 2번째 주소 : 10.0.0.1 -> AWS VPC 가상 라우터 주소
- 3번째 주소 : 10.0.0.2 -> AWS DNS 서버 주소
  - DNS 서버의 IP 주소는 해당 VPC의 IP 범위에 2를 더한 주소. CIDR 블록이 여러 개인 VPC (서브넷을 가지고 있는 VPC의 경우)<br>
    DNS 서버의 IP주소를 제외하고도 각 서브넷 IP 대역 범위에 2를 더한 모든 주소가 예약되어 있음.
